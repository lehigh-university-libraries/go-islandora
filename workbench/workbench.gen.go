//go:build go1.22

// Package workbench provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.3.0 DO NOT EDIT.
package workbench

import (
	"fmt"
	"net/http"
)

// SheetsCsv defines model for SheetsCsv.
type SheetsCsv struct {
	Abstract                                                       *string `csv:"field_abstract.attr0=abstract" json:"Abstract,omitempty"`
	Access                                                         *string `csv:"field_access" json:"Access,omitempty"`
	AddCoverpageYN                                                 *string `csv:"field_add_coverpage" json:"Add Coverpage (Y/N),omitempty"`
	ArchivalBox                                                    *string `csv:"field_note.attr0=box" json:"Archival Box,omitempty"`
	ArchivalCollection                                             *string `csv:"field_note.attr0=collection" json:"Archival Collection,omitempty"`
	ArchivalFolder                                                 *string `csv:"field_note.attr0=folder" json:"Archival Folder,omitempty"`
	ArchivalSeries                                                 *string `csv:"field_note.attr0=series" json:"Archival Series,omitempty"`
	CallNumber                                                     *string `csv:"field_identifier.attr0=call-number" json:"Call Number,omitempty"`
	CaptureDevice                                                  *string `csv:"field_note.attr0=capture-device" json:"Capture Device,omitempty"`
	CatalogOrArchivesSpaceURL                                      *string `csv:"field_identifier.attr0=uri" json:"Catalog or ArchivesSpace URL,omitempty"`
	ChildSortOrder                                                 *string `csv:"field_weight" json:"Child Sort Order,omitempty"`
	CreationDate                                                   *string `csv:"field_edtf_date_issued" json:"Creation Date,omitempty"`
	DOI                                                            *string `csv:"field_identifier.attr0=doi" json:"DOI,omitempty"`
	DateCaptured                                                   *string `csv:"field_edtf_date_captured" json:"Date Captured,omitempty"`
	Description                                                    *string `csv:"field_abstract.attr0=description" json:"Description,omitempty"`
	DigitalOrigin                                                  *string `csv:"field_digital_origin" json:"Digital Origin,omitempty"`
	Dimensions                                                     *string `csv:"field_extent.attr0=dimensions" json:"Dimensions,omitempty"`
	Edition                                                        *string `csv:"field_edition" json:"Edition,omitempty"`
	EmbargoUntilDate                                               *string `csv:"field_edtf_date_embargo" json:"Embargo Until Date,omitempty"`
	FieldAbstract                                                  *string `csv:"field_abstract" json:"FieldAbstract,omitempty"`
	FileFormatMIMEType                                             *string `csv:"field_media_type" json:"File Format (MIME Type),omitempty"`
	FilePath                                                       *string `csv:"file" json:"File Path,omitempty"`
	FileSize                                                       *string `csv:"field_extent.attr0=bytes" json:"File Size,omitempty"`
	FullTitle                                                      *string `csv:"field_full_title" json:"Full Title,omitempty"`
	GenreGettyAAT                                                  *string `csv:"field_genre" json:"Genre (Getty AAT),omitempty"`
	HierarchicalGeographicGettyTGN                                 *string `csv:"field_subject_hierarchical_geo" json:"Hierarchical Geographic (Getty TGN),omitempty"`
	HumanName                                                      *string `csv:"-" json:"Human Name,omitempty"`
	Identifier                                                     *string `csv:"field_identifier" json:"Identifier,omitempty"`
	IssueNumber                                                    *string `csv:"field_part_detail.attr0=issue" json:"Issue Number,omitempty"`
	Keyword                                                        *string `csv:"field_keywords" json:"Keyword,omitempty"`
	Language                                                       *string `csv:"field_language" json:"Language,omitempty"`
	LinkedAgent                                                    *string `csv:"field_linked_agent" json:"LinkedAgent,omitempty"`
	LocalRestriction                                               *string `csv:"field_local_restriction" json:"Local Restriction,omitempty"`
	MakePublicYN                                                   *string `csv:"published" json:"Make Public (Y/N),omitempty"`
	NodeID                                                         *string `csv:"node_id" json:"Node ID,omitempty"`
	ObjectModel                                                    *string `csv:"field_model" json:"Object Model,omitempty"`
	PPI                                                            *string `csv:"field_note.attr0=ppi" json:"PPI,omitempty"`
	PageCount                                                      *string `csv:"field_extent.attr0=page" json:"Page Count,omitempty"`
	PageNumbers                                                    *string `csv:"field_part_detail.attr0=page" json:"Page Numbers,omitempty"`
	PageItemParentID                                               *string `csv:"parent_id" json:"Page/Item Parent ID,omitempty"`
	ParentCollection                                               *string `csv:"field_member_of" json:"Parent Collection,omitempty"`
	PartDetail                                                     *string `csv:"field_part_detail" json:"PartDetail,omitempty"`
	PhysicalFormatGettyAAT                                         *string `csv:"field_physical_form" json:"Physical Format (Getty AAT),omitempty"`
	PreferredCitationIncludedOnlyInFritzLabAndEnvironmentalReports *string `csv:"field_note.attr0=preferred-citation" json:"Preferred-Citation (included only in Fritz Lab and Environmental reports),omitempty"`
	Publisher                                                      *string `csv:"field_publisher" json:"Publisher,omitempty"`
	References                                                     *string `csv:"references" json:"References,omitempty"`
	RelatedDepartment                                              *string `csv:"field_department_name" json:"Related Department,omitempty"`
	ReportNumberIncludedOnlyOnATLSSAndFritzLabSpreadsheet          *string `csv:"field_identifier.attr0=report-number" json:"Report Number (included only on ATLSS and Fritz Lab spreadsheet),omitempty"`
	ResourceType                                                   *string `csv:"field_resource_type" json:"Resource Type,omitempty"`
	RightsStatement                                                *string `csv:"field_rights" json:"Rights Statement,omitempty"`
	RunTimeHHMMSS                                                  *string `csv:"field_extent.attr0=minutes" json:"Run Time (HH:MM:SS),omitempty"`
	Season                                                         *string `csv:"field_date_season" json:"Season,omitempty"`
	SourcePublicationLISSN                                         *string `csv:"field_related_item.identifier_type=issn" json:"Source Publication L-ISSN,omitempty"`
	SourcePublicationTitle                                         *string `csv:"field_related_item.title" json:"Source Publication Title,omitempty"`
	SubjectGeographicLCNAF                                         *string `csv:"field_geographic_subject.vid=geographic_naf" json:"Subject Geographic (LCNAF),omitempty"`
	SubjectGeographicLocal                                         *string `csv:"field_geographic_subject.vid=geographic_local" json:"Subject Geographic (Local),omitempty"`
	SubjectNameLCNAF                                               *string `csv:"field_subjects_name" json:"Subject Name (LCNAF),omitempty"`
	SubjectTopicLCSH                                               *string `csv:"field_subject_lcsh" json:"Subject Topic (LCSH),omitempty"`
	Title                                                          *string `csv:"title" json:"Title,omitempty"`
	UploadID                                                       *string `csv:"id" json:"Upload ID,omitempty"`
	Url                                                            *string `csv:"url" json:"Url,omitempty"`
	VolumeNumber                                                   *string `csv:"field_part_detail.attr0=volume" json:"Volume Number,omitempty"`
}

// ServerInterface represents all server handlers.
type ServerInterface interface {
	// Upload CSV file
	// (POST /upload)
	PostUpload(w http.ResponseWriter, r *http.Request)
}

// ServerInterfaceWrapper converts contexts to parameters.
type ServerInterfaceWrapper struct {
	Handler            ServerInterface
	HandlerMiddlewares []MiddlewareFunc
	ErrorHandlerFunc   func(w http.ResponseWriter, r *http.Request, err error)
}

type MiddlewareFunc func(http.Handler) http.Handler

// PostUpload operation middleware
func (siw *ServerInterfaceWrapper) PostUpload(w http.ResponseWriter, r *http.Request) {
	ctx := r.Context()

	handler := http.Handler(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		siw.Handler.PostUpload(w, r)
	}))

	for _, middleware := range siw.HandlerMiddlewares {
		handler = middleware(handler)
	}

	handler.ServeHTTP(w, r.WithContext(ctx))
}

type UnescapedCookieParamError struct {
	ParamName string
	Err       error
}

func (e *UnescapedCookieParamError) Error() string {
	return fmt.Sprintf("error unescaping cookie parameter '%s'", e.ParamName)
}

func (e *UnescapedCookieParamError) Unwrap() error {
	return e.Err
}

type UnmarshalingParamError struct {
	ParamName string
	Err       error
}

func (e *UnmarshalingParamError) Error() string {
	return fmt.Sprintf("Error unmarshaling parameter %s as JSON: %s", e.ParamName, e.Err.Error())
}

func (e *UnmarshalingParamError) Unwrap() error {
	return e.Err
}

type RequiredParamError struct {
	ParamName string
}

func (e *RequiredParamError) Error() string {
	return fmt.Sprintf("Query argument %s is required, but not found", e.ParamName)
}

type RequiredHeaderError struct {
	ParamName string
	Err       error
}

func (e *RequiredHeaderError) Error() string {
	return fmt.Sprintf("Header parameter %s is required, but not found", e.ParamName)
}

func (e *RequiredHeaderError) Unwrap() error {
	return e.Err
}

type InvalidParamFormatError struct {
	ParamName string
	Err       error
}

func (e *InvalidParamFormatError) Error() string {
	return fmt.Sprintf("Invalid format for parameter %s: %s", e.ParamName, e.Err.Error())
}

func (e *InvalidParamFormatError) Unwrap() error {
	return e.Err
}

type TooManyValuesForParamError struct {
	ParamName string
	Count     int
}

func (e *TooManyValuesForParamError) Error() string {
	return fmt.Sprintf("Expected one value for %s, got %d", e.ParamName, e.Count)
}

// Handler creates http.Handler with routing matching OpenAPI spec.
func Handler(si ServerInterface) http.Handler {
	return HandlerWithOptions(si, StdHTTPServerOptions{})
}

type StdHTTPServerOptions struct {
	BaseURL          string
	BaseRouter       *http.ServeMux
	Middlewares      []MiddlewareFunc
	ErrorHandlerFunc func(w http.ResponseWriter, r *http.Request, err error)
}

// HandlerFromMux creates http.Handler with routing matching OpenAPI spec based on the provided mux.
func HandlerFromMux(si ServerInterface, m *http.ServeMux) http.Handler {
	return HandlerWithOptions(si, StdHTTPServerOptions{
		BaseRouter: m,
	})
}

func HandlerFromMuxWithBaseURL(si ServerInterface, m *http.ServeMux, baseURL string) http.Handler {
	return HandlerWithOptions(si, StdHTTPServerOptions{
		BaseURL:    baseURL,
		BaseRouter: m,
	})
}

// HandlerWithOptions creates http.Handler with additional options
func HandlerWithOptions(si ServerInterface, options StdHTTPServerOptions) http.Handler {
	m := options.BaseRouter

	if m == nil {
		m = http.NewServeMux()
	}
	if options.ErrorHandlerFunc == nil {
		options.ErrorHandlerFunc = func(w http.ResponseWriter, r *http.Request, err error) {
			http.Error(w, err.Error(), http.StatusBadRequest)
		}
	}

	wrapper := ServerInterfaceWrapper{
		Handler:            si,
		HandlerMiddlewares: options.Middlewares,
		ErrorHandlerFunc:   options.ErrorHandlerFunc,
	}

	m.HandleFunc("POST "+options.BaseURL+"/upload", wrapper.PostUpload)

	return m
}
